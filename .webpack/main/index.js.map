{"version":3,"file":"index.js","mappings":";;;;;;;;;;AAAa;AACb;AACA,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA;AACA,cAAc,6BAA6B,0BAA0B,cAAc,qBAAqB;AACxG,iBAAiB,oDAAoD,qEAAqE,cAAc;AACxJ,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC,mCAAmC,SAAS;AAC5C,mCAAmC,WAAW,UAAU;AACxD,0CAA0C,cAAc;AACxD;AACA,8GAA8G,OAAO;AACrH,iFAAiF,iBAAiB;AAClG,yDAAyD,gBAAgB,QAAQ;AACjF,+CAA+C,gBAAgB,gBAAgB;AAC/E;AACA,kCAAkC;AAClC;AACA;AACA,UAAU,YAAY,aAAa,SAAS,UAAU;AACtD,oCAAoC,SAAS;AAC7C;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,0BAA0B,GAAG,wBAAwB,GAAG,uBAAuB;AAC/E,iBAAiB,mBAAO,CAAC,0BAAU;AACnC,gBAAgB,mBAAO,CAAC,gDAAS;AACjC;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE,kCAAkC;AACxG;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA,KAAK;AACL,CAAC;AACD,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yEAAyE;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK,IAAI;AACT;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;;;;;;;;;;;AC5F1B,iBAAiB,OAAuB,CAAC,mBAAmB;;;;;;;;;;ACA5D,cAAc,mBAAO,CAAC,uFAA8B;;AAEpD;;AAEA,qBAAqB;;AAErB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;ACnCA;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;UCLA;;;;;;;;;;;;;;;ACDuE;AACI;AAC3E;AACA;AACA;AACA,qBAAqB,mDAAa;AAClC;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,KAAK;AACL,gBAAgB,mCAAyB;AACzC,uBAAuB,mCAAyB;AAChD;AACA;AACA,yCAAG;AACH;AACA,IAAI,wEAAgB;AACpB,sCAAsC,MAAM,uEAAe,GAAG;AAC9D;AACA;AACA,KAAK;AACL,iBAAiB,iDAAW;AAC5B;AACA,kBAAkB,uBAAuB;AACzC,eAAe,0CAAI;AACnB;AACA,wBAAwB,0CAAI;AAC5B;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA,8BAA8B,mDAAa,GAAG,yBAAyB;AACvE;AACA,aAAa;AACb,SAAS;AACT;AACA,aAAa,wDAAwD;AACrE,UAAU,4CAA4C,yCAAG,SAAS;AAClE;AACA;AACA;AACA,CAAC","sources":["webpack://writely/./node_modules/electron-selected-text/lib/index.js","webpack://writely/./node_modules/robotjs/build/Release/robotjs.node","webpack://writely/./node_modules/robotjs/index.js","webpack://writely/external node-commonjs \"electron\"","webpack://writely/webpack/bootstrap","webpack://writely/webpack/runtime/compat get default export","webpack://writely/webpack/runtime/define property getters","webpack://writely/webpack/runtime/hasOwnProperty shorthand","webpack://writely/webpack/runtime/make namespace object","webpack://writely/webpack/runtime/compat","webpack://writely/./src/electron/main/index.ts"],"sourcesContent":["\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.unregisterShortcut = exports.registerShortcut = exports.getSelectedText = void 0;\nvar electron_1 = require(\"electron\");\nvar robotjs_1 = require(\"robotjs\");\n/**\n * Gets selected text by synthesizing the keyboard shortcut\n * \"CommandOrControl+c\" then reading text from the clipboard\n */\nvar getSelectedText = function () { return __awaiter(void 0, void 0, void 0, function () {\n    var currentClipboardContent, selectedText;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                currentClipboardContent = electron_1.clipboard.readText();\n                electron_1.clipboard.clear();\n                robotjs_1.keyTap(\"c\", process.platform === \"darwin\" ? \"command\" : \"control\");\n                return [4 /*yield*/, new Promise(function (resolve) { return setTimeout(resolve, 200); })];\n            case 1:\n                _a.sent(); // add a delay before checking clipboard\n                selectedText = electron_1.clipboard.readText();\n                electron_1.clipboard.writeText(currentClipboardContent);\n                return [2 /*return*/, selectedText];\n        }\n    });\n}); };\nexports.getSelectedText = getSelectedText;\n/**\n * Registers a global shortcut of `accelerator`. The `callback` is called\n * with the selected text when the registered shorcut is pressed by the user\n *\n * Returns `true` if the shortcut was registered successfully\n */\nvar registerShortcut = function (accelerator, callback) {\n    return electron_1.globalShortcut.register(accelerator, function () { return __awaiter(void 0, void 0, void 0, function () {\n        var _a;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    _a = callback;\n                    return [4 /*yield*/, exports.getSelectedText()];\n                case 1:\n                    _a.apply(void 0, [_b.sent()]);\n                    return [2 /*return*/];\n            }\n        });\n    }); });\n};\nexports.registerShortcut = registerShortcut;\n/**\n * Unregisters a global shortcut of `accelerator` and\n * is equivalent to electron.globalShortcut.unregister\n */\nvar unregisterShortcut = function (accelerator) {\n    electron_1.globalShortcut.unregister(accelerator);\n};\nexports.unregisterShortcut = unregisterShortcut;\n","module.exports = __non_webpack_require__(__webpack_require__.ab + \"build/Release/robotjs.node\")","var robotjs = require('./build/Release/robotjs.node');\n\nmodule.exports = robotjs;\n\nmodule.exports.screen = {};\n\nfunction bitmap(width, height, byteWidth, bitsPerPixel, bytesPerPixel, image) \n{\n    this.width = width;\n    this.height = height;\n    this.byteWidth = byteWidth;\n    this.bitsPerPixel = bitsPerPixel;\n    this.bytesPerPixel = bytesPerPixel;\n    this.image = image;\n\n    this.colorAt = function(x, y)\n    {\n        return robotjs.getColor(this, x, y);\n    };\n\n}\n\nmodule.exports.screen.capture = function(x, y, width, height)\n{\n    //If coords have been passed, use them.\n    if (typeof x !== \"undefined\" && typeof y !== \"undefined\" && typeof width !== \"undefined\" && typeof height !== \"undefined\")\n    {\n        b = robotjs.captureScreen(x, y, width, height);\n    }\n    else \n    {\n        b = robotjs.captureScreen();\n    }\n\n    return new bitmap(b.width, b.height, b.byteWidth, b.bitsPerPixel, b.bytesPerPixel, b.image);\n};\n","module.exports = require(\"electron\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","\nif (typeof __webpack_require__ !== 'undefined') __webpack_require__.ab = __dirname + \"/native_modules/\";","import { app, BrowserWindow, nativeImage, Tray, Menu } from 'electron';\nimport { getSelectedText, registerShortcut } from 'electron-selected-text';\nlet mainWindow;\nlet tray;\nfunction createWindow() {\n    mainWindow = new BrowserWindow({\n        width: 800,\n        height: 600,\n        // webPreferences: {\n        //   preload: MAIN_WINDOW_PRELOAD_WEBPACK_ENTRY,\n        //   contextIsolation: true,\n        //   nodeIntegration: false,\n        // },\n    });\n    console.log(MAIN_WINDOW_WEBPACK_ENTRY);\n    mainWindow.loadURL(MAIN_WINDOW_WEBPACK_ENTRY);\n    mainWindow.webContents.openDevTools();\n}\napp.whenReady().then(() => {\n    createWindow();\n    registerShortcut('Alt+w', async () => {\n        console.log(`Selected Text: ${await getSelectedText()}`);\n        mainWindow.show();\n        mainWindow.center();\n    });\n    const icon = nativeImage\n        .createFromPath('src/icon.png')\n        .resize({ width: 16, height: 16 });\n    tray = new Tray(icon);\n    // note: your contextMenu, Tooltip and Title code will go here!\n    const contextMenu = Menu.buildFromTemplate([\n        {\n            label: 'Settings',\n            type: 'normal',\n            click: () => {\n                createWindow();\n            },\n        },\n        {\n            label: 'Help',\n            type: 'normal',\n            click: () => {\n                let win = new BrowserWindow({ width: 800, height: 600 });\n                win.loadURL('https://github.com/anc95/writely');\n            },\n        },\n        // https://www.electronjs.org/docs/latest/api/app#appsetloginitemsettingssettings-macos-windows\n        // { label: 'Launch at login', type: 'radio', checked: true },\n        { label: 'Quit', type: 'normal', click: () => app.quit() },\n    ]);\n    tray.setContextMenu(contextMenu);\n    tray.setToolTip('Writely');\n});\n"],"names":[],"sourceRoot":""}